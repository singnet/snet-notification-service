def prepare_notification_email_message(data):
    message_type = data.get("message_type")
    name = data.get("name")
    address = data.get("address")
    phone_no = data.get("phone_no")
    email = data.get("email")
    subject = data.get("subject")
    message = data.get("message")
    attachment_urls = data.get("attachment_urls")
    details = data.get("details", {})


    if not subject:
        subject = f"""{message_type} message from User"""

    details = """<br/>
                            """.join(prepare_details_record(key, value) for key, value in details.items())

    return {
        "attachment_urls": attachment_urls,
        "subject": f"""{subject}""",
        "message": f"""<div><p>{message}</p>
                            User Details<br/>
                            Name: {name}<br/>
                            Address: {address}<br/>
                            M(b): {phone_no}<br/>
                            Email: {email}<br/>
                            Request Type: {message_type}<br/>
                            {details}
                            <br/><br/>
                            <p><em>****Autogenerated email from SingularityNet Team.**** </em></p>
                        </div>"""
    }


def prepare_details_record(key, value):
    key = key.capitalize()
    return f"{key}: {value}"
